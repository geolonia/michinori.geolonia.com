!function(e){function t(t){for(var o,r,a=t[0],i=t[1],c=0,d=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(l&&l(t);d.length;)d.shift()()}var o={},n={0:0};function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,r){o=n[e]=[t,r]}));t.push(o[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(e){return r.p+""+e+".main.js"}(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(d);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,o[1](l)}n[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=i;r(r.s=0)}([function(e,t,o){"use strict";o.r(t);const n={id:"app-vertice",type:"symbol",source:"app-vertice",paint:{"text-color":"#000","text-halo-color":"#FFF","text-halo-width":2},layout:{"text-field":"aaa","text-field":["concat",["to-string",["/",["round",["*",100,["get","cumulative_length"]]],100]]," km"],"text-size":14,"text-font":["Noto Sans Regular"],"text-offset":[0,1],"text-allow-overlap":!1}},r=new URLSearchParams(window.location.search),a=e=>{r.set("g",e.geometry.coordinates.map(e=>e.join(",")).join(";")),window.history.replaceState({},"",`?${r.toString()}${window.location.hash}`),document.getElementById("url").value=window.location.href},i=async e=>{const t=await o.e(1).then(o.t.bind(null,1,7)),{coordinates:n}=e,r={type:"FeatureCollection",features:[{type:"Feature",properties:{cumulative_length:0},geometry:{type:"Point",coordinates:n[0]}}]};let a=0;for(let e=1;e<n.length;e++){const o=t.point(n[e-1]),i=t.point(n[e]);a+=t.distance(o,i),r.features.push({type:"Feature",properties:{cumulative_length:a},geometry:{type:"Point",coordinates:n[e]}})}return{vertice:r,distance:a}};document.getElementById("clip").addEventListener("click",()=>{var e=document.getElementById("url");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.setSelectionRange(0,0),u("copy",!1,0),u("copied",!0,0),u("copied",!1,3e3)});const c=document.getElementById("wizard-trail"),l=document.getElementById("wizard-copy"),d=document.getElementById("wizard-copied"),s=document.getElementById("distance"),u=(e,t,o=0)=>{const n=t?"block":"none";let r=null;switch(e){case"trail":r=c;break;case"copy":r=l;break;case"copied":r=d}r&&setTimeout(()=>r.style.display=n,o)},p=e=>{let t="";t=e<1?Math.round(1e3*e)+" m":Math.round(100*e)/100+" km",s.innerText=t},y=new geolonia.Map("#map"),m=new MapboxDraw({controls:{point:!1,polygon:!1,combine_features:!1,uncombine_features:!1},styles:[{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgb(255, 0, 0)","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}}]});y.addControl(m,"top-right"),y.on("load",async()=>{const e=(()=>{let e;document.getElementById("url").value=window.location.href;const t=r.get("g");if(t){try{e=t.split(";").map(e=>e.split(",").map(e=>parseFloat(e)))}catch(e){console.error(e)}if(e){const t={type:"LineString",coordinates:e};try{return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}}catch(e){return console.error(e),null}}}})();let t,o;const c=e=>{t&&t.remove(),o&&o.remove(),t=new geolonia.Marker,o=new geolonia.Marker;const n=e.geometry.coordinates.length-1;t.setLngLat(e.geometry.coordinates[0]).addTo(y),o.setLngLat(e.geometry.coordinates[n]).addTo(y)};if(e){m.set(e);const t=e.features[0],{distance:o,vertice:r}=await i(t.geometry);y.addSource("app-vertice",{type:"geojson",data:r}),y.addLayer(n),p(o),c(t)}u("trail",!0,1e3),y.on("draw.create",async e=>{const t=e.features[0];m.deleteAll(),m.set({type:"FeatureCollection",features:[t]}),u("trail",!1),u("copied",!1),u("copy",!0,1e3),a(t);const{distance:o,vertice:r}=await i(t.geometry);y.getSource("app-vertice")&&(y.removeLayer(n.id),y.removeSource("app-vertice")),y.addSource("app-vertice",{type:"geojson",data:r}),y.addLayer(n),p(o),c(t)}),y.on("draw.update",async e=>{if("move"===e.action||"change_coordinates"===e.action){const e=m.getAll().features[0];u("trail",!1),a(e);const{distance:t,vertice:o}=await i(e.geometry);y.getSource("app-vertice")&&(y.removeLayer(n.id),y.removeSource("app-vertice")),y.addSource("app-vertice",{type:"geojson",data:o}),y.addLayer(n),p(t),c(e)}})})}]);