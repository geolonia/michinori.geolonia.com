/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var t,e,n={1942:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.download=e.loading=void 0,e.loading='\n  <svg style="width: 100%; height: 100%;" width="45" height="45" viewBox="0 0 45 45" stroke="#fff">\n    <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2">\n      <circle cx="22" cy="22" r="6" stroke-opacity="0">\n        <animate attributeName="r"\n              begin="1.5s" dur="3s"\n              values="6;22"\n              calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-opacity"\n              begin="1.5s" dur="3s"\n              values="1;0" calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-width"\n              begin="1.5s" dur="3s"\n              values="2;0" calcMode="linear"\n              repeatCount="indefinite" />\n      </circle>\n      <circle cx="22" cy="22" r="6" stroke-opacity="0">\n        <animate attributeName="r"\n              begin="3s" dur="3s"\n              values="6;22"\n              calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-opacity"\n              begin="3s" dur="3s"\n              values="1;0" calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-width"\n              begin="3s" dur="3s"\n              values="2;0" calcMode="linear"\n              repeatCount="indefinite" />\n      </circle>\n      <circle cx="22" cy="22" r="8">\n        <animate attributeName="r"\n              begin="0s" dur="1.5s"\n              values="6;1;2;3;4;5;6"\n              calcMode="linear"\n              repeatCount="indefinite" />\n      </circle>\n    </g>\n  </svg>\n  ',e.download='\n  <svg height="19px" viewBox="0 0 14 19" width="14px" xmlns="http://www.w3.org/2000/svg">\n    <title/><desc/><defs/>\n    <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1">\n      <g fill="#000000" id="Core" transform="translate(-383.000000, -213.000000)">\n        <g id="file-download" transform="translate(383.000000, 213.500000)">\n          <path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,15 L0,17 L14,17 L14,15 L0,15 L0,15 Z" id="Shape"/>\n        </g>\n      </g>\n    </g>\n  </svg>\n  '},1268:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(3554);const i=r(n(8598)),a=n(1942),s={dpi:300,attribution:"Â© OpenStreetMap Contributors",textFont:[]};e.default=class{constructor(t={}){this.container=null,this.options=Object.assign(Object.assign({},s),t)}onAdd(t){this.container=document.createElement("div"),this.container.className="mapboxgl-ctrl mapboxgl-ctrl-group maplibregl-ctrl maplibregl-ctrl-group";const e=document.createElement("button");return e.className="mapboxgl-ctrl-icon mapbox-gl-download maplibregl-ctrl-icon maplibre-gl-download",e.type="button",e.setAttribute("aria-label","Download"),e.innerHTML=a.download,this.container.appendChild(e),e.addEventListener("click",(()=>o(this,void 0,void 0,(function*(){const e=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get:()=>this.options.dpi/96});const n=this.loading(),o=document.createElement("div");document.body.appendChild(o);const r=t.getContainer().offsetWidth,a=t.getContainer().offsetHeight,s=t.unproject([r,a]).toArray();this.setStyles(o,{visibility:"hidden",position:"absolute",top:"0",bottom:"0",width:`${r}px`,height:`${a}px`});let c,l="Noto Sans Regular";t.style.glyphManager&&t.style.glyphManager.localIdeographFontFamily&&(l=t.style.glyphManager.localIdeographFontFamily),c=void 0!==window.geolonia?window.geolonia.Map:mapboxgl.Map;const u=JSON.parse(JSON.stringify(t.getStyle())),d=new c({container:o,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),style:u,localIdeographFontFamily:l,hash:!1,preserveDrawingBuffer:!0,interactive:!1,attributionControl:!1});d.once("load",(()=>{const r={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:s},properties:{text:this.options.attribution}}]};d.addSource("attribution-for-image",{type:"geojson",data:r});let a=[];if(this.options.textFont.length)a=this.options.textFont;else{const e=t.getStyle().layers;for(let n=0;n<e.length;n++)try{const o=t.getLayoutProperty(e[n].id,"text-font");if(o&&o.length){a=o;break}}catch(t){}}d.addLayer({id:"markers",type:"symbol",source:"attribution-for-image",paint:{"text-color":"#000000","text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":2},layout:{"text-field":"{text}","text-font":a,"text-size":18,"text-anchor":"bottom-right","text-max-width":28,"text-offset":[-.5,-.5],"text-allow-overlap":!0}}),setTimeout((()=>{d.getCanvas().toBlob((t=>{t&&i.default.saveAs(t,`${d.getCenter().toArray().join("-")}.png`),d.remove(),o.parentNode.removeChild(o),n.parentNode.removeChild(n),Object.defineProperty(window,"devicePixelRatio",{get:()=>e})}))}),3e3)}))})))),this.container}onRemove(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}loading(){const t=document.createElement("div");document.body.appendChild(t),this.setStyles(t,{position:"absolute",top:"0",bottom:"0",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:"9999"});const e=document.createElement("div");return e.innerHTML=a.loading,this.setStyles(e,{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",zIndex:"9999",margin:"auto",width:"120px",height:"120px"}),t.appendChild(e),t}setStyles(t,e){for(const n in e)t.style[n]=e[n]}}},6613:t=>{function e(t){if(!(this instanceof e))return new e(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}t.exports=e,e.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},e.prototype.equals=function(t){var n;return n=t instanceof e?t.bbox():t,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]},e.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},e.prototype.union=function(t){var n;return this._valid=!0,n=t instanceof e?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this},e.prototype.bbox=function(){return this._valid?this._bbox:null},e.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},e.prototype.intersect=function(t){return this._valid?(n=t instanceof e?t.bbox():t,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])):null;var n},e.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},e.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},1795:(t,e,n)=>{var o=n(5752);function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e,n,r,i,s,c,l=0,u=t.length;if(u>2){for(c=0;c<u;c++)c===u-2?(r=u-2,i=u-1,s=0):c===u-1?(r=u-1,i=0,s=1):(r=c,i=c+1,s=c+2),e=t[r],n=t[i],l+=(a(t[s][0])-a(e[0]))*Math.sin(a(n[1]));l=l*o.RADIUS*o.RADIUS/2}return l}function a(t){return t*Math.PI/180}t.exports.geometry=function t(e){var n,o=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)o+=r(e.coordinates[n]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)o+=t(e.geometries[n]);return o}},t.exports.ring=i},7829:t=>{t.exports=function(t){return function t(e){return Array.isArray(e)&&e.length&&"number"==typeof e[0]?[e]:e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t)}},4506:(t,e,n)=>{var o=n(9340),r=n(63),i=n(7829);r instanceof Function||(r=r.default),t.exports=function(t){if(!t)return[];var e=r(o(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(i(t.geometry.coordinates)))})),n}},9319:(t,e,n)=>{var o=n(4506),r=n(3692),i=n(6613),a={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},s=Object.keys(a);function c(t){for(var e=i(),n=o(t),r=0;r<n.length;r++)e.include(n[r]);return e}t.exports=function(t){return c(t).bbox()},t.exports.polygon=function(t){return c(t).polygon()},t.exports.bboxify=function(t){return r(t).map((function(t){t&&s.some((function(e){return!!t[e]&&-1!==a[e].indexOf(t.type)}))&&(t.bbox=c(t).bbox(),this.update(t))}))}},9340:t=>{t.exports=function(t){if(!t||!t.type)return null;var n=e[t.type];return n?"geometry"===n?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===n?{type:"FeatureCollection",features:[t]}:"featurecollection"===n?t:void 0:null};var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},5550:t=>{"use strict";function e(t,e){this.x=t,this.y=e}t.exports=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=o,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),o=Math.sin(t),r=e.x+n*(this.x-e.x)-o*(this.y-e.y),i=e.y+o*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t}},3554:function(){!function(t){"use strict";var e,n=t.Uint8Array,o=t.HTMLCanvasElement,r=o&&o.prototype,i=/\s*;\s*base64\s*(?:;|$)/i,a="toDataURL",s=function(t){for(var o,r,i=t.length,a=new n(i/4*3|0),s=0,c=0,l=[0,0],u=0,d=0;i--;)r=t.charCodeAt(s++),255!==(o=e[r-43])&&void 0!==o&&(l[1]=l[0],l[0]=r,d=d<<6|o,4==++u&&(a[c++]=d>>>16,61!==l[1]&&(a[c++]=d>>>8),61!==l[0]&&(a[c++]=d),u=0));return a};n&&(e=new n([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),!o||r.toBlob&&r.toBlobHD||(r.toBlob||(r.toBlob=function(t,e){if(e||(e="image/png"),this.mozGetAsFile)t(this.mozGetAsFile("canvas",e));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(e))t(this.msToBlob());else{var o,r=Array.prototype.slice.call(arguments,1),c=this[a].apply(this,r),l=c.indexOf(","),u=c.substring(l+1),d=i.test(c.substring(0,l));Blob.fake?((o=new Blob).encoding=d?"base64":"URI",o.data=u,o.size=u.length):n&&(o=d?new Blob([s(u)],{type:e}):new Blob([decodeURIComponent(u)],{type:e})),t(o)}}),!r.toBlobHD&&r.toDataURLHD?r.toBlobHD=function(){a="toDataURLHD";var t=this.toBlob();return a="toDataURL",t}:r.toBlobHD=r.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},6902:(t,e,n)=>{"use strict";var o=n(8081),r=n.n(o),i=n(3645),a=n.n(i),s=n(1667),c=n.n(s),l=new URL(n(192),n.b),u=new URL(n(263),n.b),d=new URL(n(4363),n.b),p=new URL(n(2780),n.b),h=new URL(n(4947),n.b),f=new URL(n(1706),n.b),g=a()(r()),m=c()(l),y=c()(u),v=c()(d),b=c()(p),_=c()(h),E=c()(f);g.push([t.id,`\n/* Override default control style */\n.mapbox-gl-draw_ctrl-bottom-left,\n.mapbox-gl-draw_ctrl-top-left {\n  margin-left:0;\n  border-radius:0 4px 4px 0;\n}\n.mapbox-gl-draw_ctrl-top-right,\n.mapbox-gl-draw_ctrl-bottom-right {\n  margin-right:0;\n  border-radius:4px 0 0 4px;\n}\n\n.mapbox-gl-draw_ctrl-draw-btn {\n  border-color:rgba(0,0,0,0.9);\n  color:rgba(255,255,255,0.5);\n  width:30px;\n  height:30px;\n}\n\n.mapbox-gl-draw_ctrl-draw-btn.active,\n.mapbox-gl-draw_ctrl-draw-btn.active:hover {\n  background-color:rgb(0 0 0/5%);\n}\n.mapbox-gl-draw_ctrl-draw-btn {\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.mapbox-gl-draw_point {\n  background-image: url(${m});\n}\n.mapbox-gl-draw_polygon {\n  background-image: url(${y});\n}\n.mapbox-gl-draw_line {\n  background-image: url(${v});\n}\n.mapbox-gl-draw_trash {\n  background-image: url(${b});\n}\n.mapbox-gl-draw_uncombine {\n  background-image: url(${_});\n}\n.mapbox-gl-draw_combine {\n  background-image: url(${E});\n}\n\n.mapboxgl-map.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mouse-pointer .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: pointer;\n}\n.mapboxgl-map.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mouse-move .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mouse-add .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mouse-add .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: crosshair;\n}\n.mapboxgl-map.mouse-move.mode-direct_select .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mouse-move.mode-direct_select .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.mapboxgl-map.mode-direct_select.feature-vertex.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mode-direct_select.feature-vertex.mouse-move .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mode-direct_select.feature-midpoint.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mode-direct_select.feature-midpoint.mouse-pointer .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: cell;\n}\n.mapboxgl-map.mode-direct_select.feature-feature.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mode-direct_select.feature-feature.mouse-move .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mode-static.mouse-pointer  .mapboxgl-canvas-container.mapboxgl-interactive,\n.maplibregl-map.mode-static.mouse-pointer  .maplibregl-canvas-container.maplibregl-interactive {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.mapbox-gl-draw_boxselect {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: rgba(0,0,0,.1);\n    border: 2px dotted #fff;\n    opacity: 0.5;\n}\n`,""])},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);o&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},1667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{"use strict";t.exports=function(t){return t[1]}},8598:function(t,e,n){var o,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},c=function(t){setTimeout((function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},u=function(e,u,d){d||(e=l(e));var p,h=this,f="application/octet-stream"===e.type,g=function(){!function(t,e,n){for(var o=(e=[].concat(e)).length;o--;){var r=t["on"+e[o]];if("function"==typeof r)try{r.call(t,t)}catch(t){s(t)}}}(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,r)return p=n().createObjectURL(e),void setTimeout((function(){var t,e;o.href=p,o.download=u,t=o,e=new MouseEvent("click"),t.dispatchEvent(e),g(),c(p),h.readyState=h.DONE}));!function(){if((a||f&&i)&&t.FileReader){var o=new FileReader;return o.onloadend=function(){var e=a?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,h.readyState=h.DONE,g()},o.readAsDataURL(e),void(h.readyState=h.INIT)}p||(p=n().createObjectURL(e)),f?t.location.href=p:t.open(p,"_blank")||(t.location.href=p),h.readyState=h.DONE,g(),c(p)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,n){return new u(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=r:null!==n.amdD&&null!==n.amdO&&(void 0===(o=function(){return r}.call(e,n,e,t))||(t.exports=o))},63:(t,e,n)=>{"use strict";function o(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,e){return t.concat(o(e))}),[]),t;case"Feature":return t.geometry?o(t.geometry).map((function(e){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(n.id=t.id),n})):[t];case"MultiPoint":return t.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return t.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return t.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return t.geometries.map(o).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}n.r(e),n.d(e,{default:()=>o})},542:t=>{var e=t.exports=function(t,n){if(n||(n=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(n),r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(n)*r;var i=o-Math.floor(o),a="";for(r=0;r<Math.floor(o);r++)a=Math.floor(Math.random()*n).toString(n)+a;if(i){var s=Math.pow(n,i);a=Math.floor(Math.random()*s).toString(n)+a}var c=parseInt(a,n);return c!==1/0&&c>=Math.pow(2,t)?e(t,n):a};e.rack=function(t,n,o){var r=function(r){var a=0;do{if(a++>10){if(!o)throw new Error("too many ID collisions, use more bits");t+=o}var s=e(t,n)}while(Object.hasOwnProperty.call(i,s));return i[s]=r,s},i=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=n||16,r}},2307:(t,e,n)=>{t=n.nmd(t);var o="__lodash_hash_undefined__",r=1,i=2,a=9007199254740991,s="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",p="[object Error]",h="[object Function]",f="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Promise]",_="[object Proxy]",E="[object RegExp]",C="[object Set]",x="[object String]",w="[object Undefined]",T="[object WeakMap]",S="[object ArrayBuffer]",L="[object DataView]",I=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[s]=M[c]=M[S]=M[u]=M[L]=M[d]=M[p]=M[h]=M[g]=M[m]=M[v]=M[E]=M[C]=M[x]=M[T]=!1;var N="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,A="object"==typeof self&&self&&self.Object===Object&&self,P=N||A||Function("return this")(),F=e&&!e.nodeType&&e,k=F&&t&&!t.nodeType&&t,R=k&&k.exports===F,D=R&&N.process,U=function(){try{return D&&D.binding&&D.binding("util")}catch(t){}}(),j=U&&U.isTypedArray;function B(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function V(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}function $(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var G,z,J,H=Array.prototype,Y=Function.prototype,Z=Object.prototype,q=P["__core-js_shared__"],X=Y.toString,W=Z.hasOwnProperty,K=(G=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Q=Z.toString,tt=RegExp("^"+X.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=R?P.Buffer:void 0,nt=P.Symbol,ot=P.Uint8Array,rt=Z.propertyIsEnumerable,it=H.splice,at=nt?nt.toStringTag:void 0,st=Object.getOwnPropertySymbols,ct=et?et.isBuffer:void 0,lt=(z=Object.keys,J=Object,function(t){return z(J(t))}),ut=kt(P,"DataView"),dt=kt(P,"Map"),pt=kt(P,"Promise"),ht=kt(P,"Set"),ft=kt(P,"WeakMap"),gt=kt(Object,"create"),mt=jt(ut),yt=jt(dt),vt=jt(pt),bt=jt(ht),_t=jt(ft),Et=nt?nt.prototype:void 0,Ct=Et?Et.valueOf:void 0;function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function St(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Tt;++e<n;)this.add(t[e])}function Lt(t){var e=this.__data__=new wt(t);this.size=e.size}function It(t,e){for(var n=t.length;n--;)if(Bt(t[n][0],e))return n;return-1}function Ot(t){return null==t?void 0===t?w:y:at&&at in Object(t)?function(t){var e=W.call(t,at),n=t[at];try{t[at]=void 0;var o=!0}catch(t){}var r=Q.call(t);return o&&(e?t[at]=n:delete t[at]),r}(t):function(t){return Q.call(t)}(t)}function Mt(t){return Yt(t)&&Ot(t)==s}function Nt(t,e,n,o,a){return t===e||(null==t||null==e||!Yt(t)&&!Yt(e)?t!=t&&e!=e:function(t,e,n,o,a,l){var h=$t(t),f=$t(e),y=h?c:Dt(t),b=f?c:Dt(e),_=(y=y==s?v:y)==v,w=(b=b==s?v:b)==v,T=y==b;if(T&&Gt(t)){if(!Gt(e))return!1;h=!0,_=!1}if(T&&!_)return l||(l=new Lt),h||Zt(t)?At(t,e,n,o,a,l):function(t,e,n,o,a,s,c){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return!(t.byteLength!=e.byteLength||!s(new ot(t),new ot(e)));case u:case d:case m:return Bt(+t,+e);case p:return t.name==e.name&&t.message==e.message;case E:case x:return t==e+"";case g:var l=V;case C:var h=o&r;if(l||(l=$),t.size!=e.size&&!h)return!1;var f=c.get(t);if(f)return f==e;o|=i,c.set(t,e);var y=At(l(t),l(e),o,a,s,c);return c.delete(t),y;case"[object Symbol]":if(Ct)return Ct.call(t)==Ct.call(e)}return!1}(t,e,y,n,o,a,l);if(!(n&r)){var I=_&&W.call(t,"__wrapped__"),O=w&&W.call(e,"__wrapped__");if(I||O){var M=I?t.value():t,N=O?e.value():e;return l||(l=new Lt),a(M,N,n,o,l)}}return!!T&&(l||(l=new Lt),function(t,e,n,o,i,a){var s=n&r,c=Pt(t),l=c.length;if(l!=Pt(e).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in e:W.call(e,d)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var h=!0;a.set(t,e),a.set(e,t);for(var f=s;++u<l;){var g=t[d=c[u]],m=e[d];if(o)var y=s?o(m,g,d,e,t,a):o(g,m,d,t,e,a);if(!(void 0===y?g===m||i(g,m,n,o,a):y)){h=!1;break}f||(f="constructor"==d)}if(h&&!f){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return a.delete(t),a.delete(e),h}(t,e,n,o,a,l))}(t,e,n,o,Nt,a))}function At(t,e,n,o,a,s){var c=n&r,l=t.length,u=e.length;if(l!=u&&!(c&&u>l))return!1;var d=s.get(t);if(d&&s.get(e))return d==e;var p=-1,h=!0,f=n&i?new St:void 0;for(s.set(t,e),s.set(e,t);++p<l;){var g=t[p],m=e[p];if(o)var y=c?o(m,g,p,e,t,s):o(g,m,p,t,e,s);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!B(e,(function(t,e){if(r=e,!f.has(r)&&(g===t||a(g,t,n,o,s)))return f.push(e);var r}))){h=!1;break}}else if(g!==m&&!a(g,m,n,o,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function Pt(t){return function(t,e,n){var o=e(t);return $t(t)?o:function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}(o,n(t))}(t,qt,Rt)}function Ft(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function kt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Ht(t)||function(t){return!!K&&K in t}(t))&&(zt(t)?tt:I).test(jt(t))}(n)?n:void 0}xt.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xt.prototype.get=function(t){var e=this.__data__;if(gt){var n=e[t];return n===o?void 0:n}return W.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:W.call(e,t)},xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gt&&void 0===e?o:e,this},wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=It(e,t);return!(n<0||(n==e.length-1?e.pop():it.call(e,n,1),--this.size,0))},wt.prototype.get=function(t){var e=this.__data__,n=It(e,t);return n<0?void 0:e[n][1]},wt.prototype.has=function(t){return It(this.__data__,t)>-1},wt.prototype.set=function(t,e){var n=this.__data__,o=It(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this},Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new xt,map:new(dt||wt),string:new xt}},Tt.prototype.delete=function(t){var e=Ft(this,t).delete(t);return this.size-=e?1:0,e},Tt.prototype.get=function(t){return Ft(this,t).get(t)},Tt.prototype.has=function(t){return Ft(this,t).has(t)},Tt.prototype.set=function(t,e){var n=Ft(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this},St.prototype.add=St.prototype.push=function(t){return this.__data__.set(t,o),this},St.prototype.has=function(t){return this.__data__.has(t)},Lt.prototype.clear=function(){this.__data__=new wt,this.size=0},Lt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Lt.prototype.get=function(t){return this.__data__.get(t)},Lt.prototype.has=function(t){return this.__data__.has(t)},Lt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof wt){var o=n.__data__;if(!dt||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new Tt(o)}return n.set(t,e),this.size=n.size,this};var Rt=st?function(t){return null==t?[]:(t=Object(t),function(e,n){for(var o=-1,r=null==e?0:e.length,i=0,a=[];++o<r;){var s=e[o];c=s,rt.call(t,c)&&(a[i++]=s)}var c;return a}(st(t)))}:function(){return[]},Dt=Ot;function Ut(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||O.test(t))&&t>-1&&t%1==0&&t<e}function jt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bt(t,e){return t===e||t!=t&&e!=e}(ut&&Dt(new ut(new ArrayBuffer(1)))!=L||dt&&Dt(new dt)!=g||pt&&Dt(pt.resolve())!=b||ht&&Dt(new ht)!=C||ft&&Dt(new ft)!=T)&&(Dt=function(t){var e=Ot(t),n=e==v?t.constructor:void 0,o=n?jt(n):"";if(o)switch(o){case mt:return L;case yt:return g;case vt:return b;case bt:return C;case _t:return T}return e});var Vt=Mt(function(){return arguments}())?Mt:function(t){return Yt(t)&&W.call(t,"callee")&&!rt.call(t,"callee")},$t=Array.isArray,Gt=ct||function(){return!1};function zt(t){if(!Ht(t))return!1;var e=Ot(t);return e==h||e==f||e==l||e==_}function Jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Ht(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Yt(t){return null!=t&&"object"==typeof t}var Zt=j?function(t){return function(e){return t(e)}}(j):function(t){return Yt(t)&&Jt(t.length)&&!!M[Ot(t)]};function qt(t){return null!=(e=t)&&Jt(e.length)&&!zt(e)?function(t,e){var n=$t(t),o=!n&&Vt(t),r=!n&&!o&&Gt(t),i=!n&&!o&&!r&&Zt(t),a=n||o||r||i,s=a?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],c=s.length;for(var l in t)!e&&!W.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ut(l,c))||s.push(l);return s}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||Z))return lt(t);var e,n,o=[];for(var r in Object(t))W.call(t,r)&&"constructor"!=r&&o.push(r);return o}(t);var e}t.exports=function(t,e){return Nt(t,e)}},3692:t=>{"use strict";function e(t){return Object.prototype.toString.call(t)}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)}var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},i=Object.prototype.hasOwnProperty||function(t,e){return e in t};function a(t){if("object"==typeof t&&null!==t){var i;if(n(t))i=[];else if("[object Date]"===e(t))i=new Date(t.getTime?t.getTime():t);else if("[object RegExp]"===e(t))i=new RegExp(t);else if(function(t){return"[object Error]"===e(t)}(t))i={message:t.message};else if(function(t){return"[object Boolean]"===e(t)}(t)||function(t){return"[object Number]"===e(t)}(t)||function(t){return"[object String]"===e(t)}(t))i=Object(t);else if(Object.create&&Object.getPrototypeOf)i=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)i={};else{var a=t.constructor&&t.constructor.prototype||t.__proto__||{},s=function(){};s.prototype=a,i=new s}return o(r(t),(function(e){i[e]=t[e]})),i}return t}function s(t,e,s){var c=[],l=[],u=!0;return function t(d){var p=s?a(d):d,h={},f=!0,g={node:p,node_:d,path:[].concat(c),parent:l[l.length-1],parents:l,key:c[c.length-1],isRoot:0===c.length,level:c.length,circular:null,update:function(t,e){g.isRoot||(g.parent.node[g.key]=t),g.node=t,e&&(f=!1)},delete:function(t){delete g.parent.node[g.key],t&&(f=!1)},remove:function(t){n(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],t&&(f=!1)},keys:null,before:function(t){h.before=t},after:function(t){h.after=t},pre:function(t){h.pre=t},post:function(t){h.post=t},stop:function(){u=!1},block:function(){f=!1}};if(!u)return g;function m(){if("object"==typeof g.node&&null!==g.node){g.keys&&g.node_===g.node||(g.keys=r(g.node)),g.isLeaf=0===g.keys.length;for(var t=0;t<l.length;t++)if(l[t].node_===d){g.circular=l[t];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}m();var y=e.call(g,g.node);return void 0!==y&&g.update&&g.update(y),h.before&&h.before.call(g,g.node),f?("object"!=typeof g.node||null===g.node||g.circular||(l.push(g),m(),o(g.keys,(function(e,n){c.push(e),h.pre&&h.pre.call(g,g.node[e],e);var o=t(g.node[e]);s&&i.call(g.node,e)&&(g.node[e]=o.node),o.isLast=n===g.keys.length-1,o.isFirst=0===n,h.post&&h.post.call(g,o),c.pop()})),l.pop()),h.after&&h.after.call(g,g.node),g):g}(t).node}function c(t){this.value=t}function l(t){return new c(t)}c.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!i.call(e,o))return;e=e[o]}return e},c.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!i.call(e,o))return!1;e=e[o]}return!0},c.prototype.set=function(t,e){for(var n=this.value,o=0;o<t.length-1;o++){var r=t[o];i.call(n,r)||(n[r]={}),n=n[r]}return n[t[o]]=e,e},c.prototype.map=function(t){return s(this.value,t,!0)},c.prototype.forEach=function(t){return this.value=s(this.value,t,!1),this.value},c.prototype.reduce=function(t,e){var n=1===arguments.length,o=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(o=t.call(this,o,e))})),o},c.prototype.paths=function(){var t=[];return this.forEach((function(){t.push(this.path)})),t},c.prototype.nodes=function(){var t=[];return this.forEach((function(){t.push(this.node)})),t},c.prototype.clone=function(){var t=[],e=[];return function n(i){for(var s=0;s<t.length;s++)if(t[s]===i)return e[s];if("object"==typeof i&&null!==i){var c=a(i);return t.push(i),e.push(c),o(r(i),(function(t){c[t]=n(i[t])})),t.pop(),e.pop(),c}return i}(this.value)},o(r(c.prototype),(function(t){l[t]=function(e){var n=[].slice.call(arguments,1),o=new c(e);return o[t].apply(o,n)}})),t.exports=l},5752:t=>{t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},7529:t=>{t.exports=function(){for(var t={},n=0;n<arguments.length;n++){var o=arguments[n];for(var r in o)e.call(o,r)&&(t[r]=o[r])}return t};var e=Object.prototype.hasOwnProperty},2780:t=>{"use strict";t.exports='data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M10,3.4 c-0.8,0-1.5,0.5-1.8,1.2H5l-1,1v1h12v-1l-1-1h-3.2C11.5,3.9,10.8,3.4,10,3.4z M5,8v7c0,1,1,2,2,2h6c1,0,2-1,2-2V8h-2v5.5h-1.5V8h-3 v5.5H7V8H5z"/>%3C/svg>'},1706:t=>{"use strict";t.exports='data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M12.1,2c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l4.9,4.9c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-4.9-4.9C12.6,2.1,12.3,2,12.1,2z M8,8C7,8,7,9,7.5,9.5c0.3,0.3,1,1,1,1l-1,1c0,0-0.5,0.5,0,1s1,0,1,0l1-1l1,1 C11,13,12,13,12,12V8H8z M4,10c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1c0.4-0.4,0.4-1,0-1.4 l-1-1C4.5,10.1,4.3,10,4,10z M8,14c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-1-1C8.5,14.1,8.3,14,8,14z"/>%3C/svg>'},192:t=>{"use strict";t.exports='data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m10 2c-3.3 0-6 2.7-6 6s6 9 6 9 6-5.7 6-9-2.7-6-6-6zm0 2c2.1 0 3.8 1.7 3.8 3.8 0 1.5-1.8 3.9-2.9 5.2h-1.7c-1.1-1.4-2.9-3.8-2.9-5.2-.1-2.1 1.6-3.8 3.7-3.8z"/>%3C/svg>'},4947:t=>{"use strict";t.exports='data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m12 2c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm4 4c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm-7 1c-1 0-1 1-.5 1.5.3.3 1 1 1 1l-1 1s-.5.5 0 1 1 0 1 0l1-1 1 1c.5.5 1.5.5 1.5-.5v-4zm-5 3c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l4.9 4.9c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-4.9-4.9c-.1-.2-.4-.3-.7-.3z"/>%3C/svg>'},4363:t=>{"use strict";t.exports='data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m13.5 3.5c-1.4 0-2.5 1.1-2.5 2.5 0 .3 0 .6.2.9l-3.8 3.8c-.3-.1-.6-.2-.9-.2-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5c0-.3 0-.6-.2-.9l3.8-3.8c.3.1.6.2.9.2 1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5z"/>%3C/svg>'},263:t=>{"use strict";t.exports='data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m15 12.3v-4.6c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2-.7 0-1.4.4-1.7 1h-4.6c-.3-.6-1-1-1.7-1-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7v4.6c-.6.3-1 1-1 1.7 0 1.1.9 2 2 2 .7 0 1.4-.4 1.7-1h4.6c.3.6 1 1 1.7 1 1.1 0 2-.9 2-2 0-.7-.4-1.4-1-1.7zm-8-.3v-4l1-1h4l1 1v4l-1 1h-4z"/>%3C/svg>'}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={id:t,loaded:!1,exports:{}};return n[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=n,r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>t+".main.bundle.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="@geolonia/michinori.geolonia.com:",r.l=(n,o,i,a)=>{if(t[n])t[n].push(o);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",e+i),s.src=n),t[n]=[o];var p=(e,o)=>{s.onerror=s.onload=null,clearTimeout(h);var r=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(o))),e)return e(o)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&!t;)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{r.b=document.baseURI||self.location.href;var t={179:0};r.f.j=(e,n)=>{var o=r.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((n,r)=>o=t[e]=[n,r]));n.push(o[2]=i);var a=r.p+r.u(e),s=new Error;r.l(a,(n=>{if(r.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+e,e)}};var e=(e,n)=>{var o,i,[a,s,c]=n,l=0;if(a.some((e=>0!==t[e]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);c&&c(r)}for(e&&e(n);l<a.length;l++)i=a[l],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunk_geolonia_michinori_geolonia_com=self.webpackChunk_geolonia_michinori_geolonia_com||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),(()=>{"use strict";var t={};r.r(t),r.d(t,{LAT_MAX:()=>k,LAT_MIN:()=>P,LAT_RENDERED_MAX:()=>R,LAT_RENDERED_MIN:()=>F,LNG_MAX:()=>U,LNG_MIN:()=>D,activeStates:()=>N,classes:()=>C,cursors:()=>w,events:()=>I,geojsonTypes:()=>S,interactions:()=>A,meta:()=>M,modes:()=>L,sources:()=>x,types:()=>T,updateActions:()=>O});var e={};r.r(e),r.d(e,{isActiveFeature:()=>At,isEnterKey:()=>jt,isEscapeKey:()=>Ut,isFeature:()=>kt,isInactiveFeature:()=>Pt,isOfMetaType:()=>Mt,isShiftDown:()=>Dt,isShiftMousedown:()=>Nt,isTrue:()=>Bt,isVertex:()=>Rt,noTarget:()=>Ft});var n={};r.r(n),r.d(n,{CommonSelectors:()=>e,ModeHandler:()=>_,StringSet:()=>z,constrainFeatureMovement:()=>ne,createMidPoint:()=>Jt,createSupplementaryPoints:()=>Ht,createVertex:()=>zt,doubleClickZoom:()=>Yt,euclideanDistance:()=>q,featuresAt:()=>H,getFeatureAtAndSetCursors:()=>Z,isClick:()=>Q,isEventAtCoordinates:()=>pe,isTap:()=>nt,mapEventToBoundingBox:()=>$,moveFeatures:()=>oe,sortFeatures:()=>V,stringSetsAreEqual:()=>Te,theme:()=>Ot,toDenseArray:()=>Et}),r(6902);const o=(t=!0)=>({id:"app-vertice",type:"symbol",source:"app-vertice",filter:["all",["has","cumulative_length"]],paint:{"text-color":"#000","text-halo-color":"#FFF","text-halo-width":2},layout:{"text-field":["format",["to-string",["/",["round",["*",100,["get","cumulative_length"]]],100]],{"font-scale":1}," km",{"font-scale":1},...t?[" (EL.",{"font-scale":.8},["get","elevation_str"],{"font-scale":.8},")",{"font-scale":.8}]:[]],"text-size":16,"text-font":["Noto Sans Regular"],"text-offset":[0,1],"text-variable-anchor":["bottom","top"],"text-allow-overlap":!1}}),i={id:"app-end-circle",type:"circle",source:"app-vertice",filter:["all",["==","isEnd",!0]],paint:{"circle-radius":8,"circle-color":"#e74230"}},a=new URLSearchParams(window.location.search),s=document.getElementById("url"),c=t=>{a.set("g",t.geometry.coordinates.map((t=>t.join(","))).join(";")),window.history.replaceState({},"",`?${a.toString()}${window.location.hash}`),s.value=window.location.href},l=async t=>{const e=await r.e(148).then(r.bind(r,4148)),{coordinates:n}=t,o={type:"FeatureCollection",features:[{type:"Feature",properties:{cumulative_length:0,isEnd:!0},geometry:{type:"Point",coordinates:n[0]}}]};let i=0;for(let t=1;t<n.length;t++){const r=e.point(n[t-1]),a=e.point(n[t]);i+=e.distance(r,a),o.features.push({type:"Feature",properties:{cumulative_length:i,isEnd:t===n.length-1},geometry:{type:"Point",coordinates:n[t]}})}return(await d(o)).reduce(((t,e,n)=>{if(e&&e.elevation){const{elevation:r,hsrc:i}=e;o.features[n].properties.elevation=r,o.features[n].properties.elevation_str=Math.round(100*("number"==typeof r?r:0))/100+"m",o.features[n].properties.hsrc=i;let a="";if(null!==t){const e=0===n?0:r-t;o.features[n].properties.elevation_diff=e,e>0?a=`(+${Math.round(100*e)/100}m)`:e<0&&(a=`(-${Math.round(100*Math.abs(e))/100}m)`)}return o.features[n].properties.elevation_diff_str=a,r}return null}),0),{vertice:o}},u={},d=t=>Promise.all(t.features.map((t=>{const[e,n]=t.geometry.coordinates,o=`${e}/${n}`;return u[o]?u[o]:fetch(`https://cyberjapandata2.gsi.go.jp/general/dem/scripts/getelevation.php?lon=${e}&lat=${n}&outtype=JSON`).then((t=>{if(t.status<300)return t.json();throw t})).then((t=>(u[o]=t,t))).catch((t=>(console.error(t),!1)))}))),p=document.getElementById("wizard-trail"),h=document.getElementById("wizard-switch"),f=document.getElementById("wizard-download"),g=document.getElementById("wizard-copy"),m=document.getElementById("wizard-copied"),y=(t,e,n=0)=>{const o=e?"block":"none";let r=null;switch(t){case"trail":r=p;break;case"switch":r=h;break;case"download":r=f;break;case"copy":r=g;break;case"copied":r=m}r&&setTimeout((()=>r.style.display=o),n)};var v=r(1268),b=r.n(v);const _=function(t,e){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},o={on(t,e,o){if(void 0===n[t])throw new Error(`Invalid event type: ${t}`);n[t].push({selector:e,fn:o})},render(t){e.store.featureChanged(t)}},r=function(t,r){const i=n[t];let a=i.length;for(;a--;){const t=i[a];if(t.selector(r)){t.fn.call(o,r)||e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(o),{render:t.render,stop(){t.stop&&t.stop()},trash(){t.trash&&(t.trash(),e.store.render())},combineFeatures(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures(){t.uncombineFeatures&&t.uncombineFeatures()},drag(t){r("drag",t)},click(t){r("click",t)},mousemove(t){r("mousemove",t)},mousedown(t){r("mousedown",t)},mouseup(t){r("mouseup",t)},mouseout(t){r("mouseout",t)},keydown(t){r("keydown",t)},keyup(t){r("keyup",t)},touchstart(t){r("touchstart",t)},touchmove(t){r("touchmove",t)},touchend(t){r("touchend",t)},tap(t){r("tap",t)}}};var E=r(1795);const C={CONTROL_BASE:"mapboxgl-ctrl maplibregl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group maplibregl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib maplibregl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},x={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},w={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},T={POLYGON:"polygon",LINE:"line_string",POINT:"point"},S={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},L={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},I={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},O={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},M={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},N={ACTIVE:"true",INACTIVE:"false"},A=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],P=-90,F=-85,k=90,R=85,D=-270,U=270,j={Point:0,LineString:1,MultiLineString:1,Polygon:2};function B(t,e){const n=j[t.geometry.type]-j[e.geometry.type];return 0===n&&t.geometry.type===S.POLYGON?t.area-e.area:n}const V=function(t){return t.map((t=>(t.geometry.type===S.POLYGON&&(t.area=E.geometry({type:S.FEATURE,property:{},geometry:t.geometry})),t))).sort(B).map((t=>(delete t.area,t)))},$=function(t,e=0){return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]};function G(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(let e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}G.prototype.add=function(t){return this.has(t)||(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},G.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},G.prototype.has=function(t){return!("string"!=typeof t&&"number"!=typeof t||void 0===this._items[t]&&void 0===this._nums[t])},G.prototype.values=function(){const t=[];return Object.keys(this._items).forEach((e=>{t.push({k:e,v:this._items[e]})})),Object.keys(this._nums).forEach((e=>{t.push({k:JSON.parse(e),v:this._nums[e]})})),t.sort(((t,e)=>t.v-e.v)).map((t=>t.k))},G.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const z=G,J=[M.FEATURE,M.MIDPOINT,M.VERTEX],H={click:function(t,e,n){return Y(t,e,n,n.options.clickBuffer)},touch:function(t,e,n){return Y(t,e,n,n.options.touchBuffer)}};function Y(t,e,n,o){if(null===n.map)return[];const r=t?$(t,o):e,i={};n.options.styles&&(i.layers=n.options.styles.map((t=>t.id)));const a=n.map.queryRenderedFeatures(r,i).filter((t=>-1!==J.indexOf(t.properties.meta))),s=new z,c=[];return a.forEach((t=>{const e=t.properties.id;s.has(e)||(s.add(e),c.push(t))})),V(c)}function Z(t,e){const n=H.click(t,null,e),o={mouse:w.NONE};return n[0]&&(o.mouse=n[0].properties.active===N.ACTIVE?w.MOVE:w.POINTER,o.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(o.mouse=w.ADD),e.ui.queueMapClasses(o),e.ui.updateMapClasses(),n[0]}function q(t,e){const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)}const X=4,W=12,K=500;function Q(t,e,n={}){const o=null!=n.fineTolerance?n.fineTolerance:X,r=null!=n.grossTolerance?n.grossTolerance:W,i=null!=n.interval?n.interval:K;t.point=t.point||e.point,t.time=t.time||e.time;const a=q(t.point,e.point);return a<o||a<r&&e.time-t.time<i}const tt=25,et=250;function nt(t,e,n={}){const o=null!=n.tolerance?n.tolerance:tt,r=null!=n.interval?n.interval:et;return t.point=t.point||e.point,t.time=t.time||e.time,q(t.point,e.point)<o&&e.time-t.time<r}var ot=r(542),rt=r.n(ot);const it=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||rt()(),this.type=e.geometry.type};it.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},it.prototype.incomingCoords=function(t){this.setCoordinates(t)},it.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},it.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},it.prototype.setProperty=function(t,e){this.properties[t]=e},it.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:S.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},it.prototype.internal=function(t){const e={id:this.id,meta:M.FEATURE,"meta:type":this.type,active:N.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(const t in this.properties)e[`user_${t}`]=this.properties[t];return{type:S.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const at=it,st=function(t,e){at.call(this,t,e)};(st.prototype=Object.create(at.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},st.prototype.updateCoordinate=function(t,e,n){this.coordinates=3===arguments.length?[e,n]:[t,e],this.changed()},st.prototype.getCoordinate=function(){return this.getCoordinates()};const ct=st,lt=function(t,e){at.call(this,t,e)};(lt.prototype=Object.create(at.prototype)).isValid=function(){return this.coordinates.length>1},lt.prototype.addCoordinate=function(t,e,n){this.changed();const o=parseInt(t,10);this.coordinates.splice(o,0,[e,n])},lt.prototype.getCoordinate=function(t){const e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},lt.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},lt.prototype.updateCoordinate=function(t,e,n){const o=parseInt(t,10);this.coordinates[o]=[e,n],this.changed()};const ut=lt,dt=function(t,e){at.call(this,t,e),this.coordinates=this.coordinates.map((t=>t.slice(0,-1)))};(dt.prototype=Object.create(at.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((t=>t.length>2))},dt.prototype.incomingCoords=function(t){this.coordinates=t.map((t=>t.slice(0,-1))),this.changed()},dt.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},dt.prototype.addCoordinate=function(t,e,n){this.changed();const o=t.split(".").map((t=>parseInt(t,10)));this.coordinates[o[0]].splice(o[1],0,[e,n])},dt.prototype.removeCoordinate=function(t){this.changed();const e=t.split(".").map((t=>parseInt(t,10))),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},dt.prototype.getCoordinate=function(t){const e=t.split(".").map((t=>parseInt(t,10))),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},dt.prototype.getCoordinates=function(){return this.coordinates.map((t=>t.concat([t[0]])))},dt.prototype.updateCoordinate=function(t,e,n){this.changed();const o=t.split("."),r=parseInt(o[0],10),i=parseInt(o[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[e,n]};const pt=dt,ht={MultiPoint:ct,MultiLineString:ut,MultiPolygon:pt},ft=(t,e,n,o,r)=>{const i=n.split("."),a=parseInt(i[0],10),s=i[1]?i.slice(1).join("."):null;return t[a][e](s,o,r)},gt=function(t,e){if(at.call(this,t,e),delete this.coordinates,this.model=ht[e.geometry.type],void 0===this.model)throw new TypeError(`${e.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(gt.prototype=Object.create(at.prototype))._coordinatesToFeatures=function(t){const e=this.model.bind(this);return t.map((t=>new e(this.ctx,{id:rt()(),type:S.FEATURE,properties:{},geometry:{coordinates:t,type:this.type.replace("Multi","")}})))},gt.prototype.isValid=function(){return this.features.every((t=>t.isValid()))},gt.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},gt.prototype.getCoordinate=function(t){return ft(this.features,"getCoordinate",t)},gt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((t=>t.type===S.POLYGON?t.getCoordinates():t.coordinates))))},gt.prototype.updateCoordinate=function(t,e,n){ft(this.features,"updateCoordinate",t,e,n),this.changed()},gt.prototype.addCoordinate=function(t,e,n){ft(this.features,"addCoordinate",t,e,n),this.changed()},gt.prototype.removeCoordinate=function(t){ft(this.features,"removeCoordinate",t),this.changed()},gt.prototype.getFeatures=function(){return this.features};const mt=gt;function yt(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}yt.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},yt.prototype.setSelectedCoordinates=function(t){this._ctx.store.setSelectedCoordinates(t),t.reduce(((t,e)=>(void 0===t[e.feature_id]&&(t[e.feature_id]=!0,this._ctx.store.get(e.feature_id).changed()),t)),{})},yt.prototype.getSelected=function(){return this._ctx.store.getSelected()},yt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},yt.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},yt.prototype.getFeature=function(t){return this._ctx.store.get(t)},yt.prototype.select=function(t){return this._ctx.store.select(t)},yt.prototype.deselect=function(t){return this._ctx.store.deselect(t)},yt.prototype.deleteFeature=function(t,e={}){return this._ctx.store.delete(t,e)},yt.prototype.addFeature=function(t){return this._ctx.store.add(t)},yt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},yt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},yt.prototype.setActionableState=function(t={}){const e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},yt.prototype.changeMode=function(t,e={},n={}){return this._ctx.events.changeMode(t,e,n)},yt.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},yt.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},yt.prototype.featuresAt=function(t,e,n="click"){if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return H[n](t,e,this._ctx)},yt.prototype.newFeature=function(t){const e=t.geometry.type;return e===S.POINT?new ct(this._ctx,t):e===S.LINE_STRING?new ut(this._ctx,t):e===S.POLYGON?new pt(this._ctx,t):new mt(this._ctx,t)},yt.prototype.isInstanceOf=function(t,e){if(t===S.POINT)return e instanceof ct;if(t===S.LINE_STRING)return e instanceof ut;if(t===S.POLYGON)return e instanceof pt;if("MultiFeature"===t)return e instanceof mt;throw new Error(`Unknown feature class: ${t}`)},yt.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)};const vt=yt;yt.prototype.onSetup=function(){},yt.prototype.onDrag=function(){},yt.prototype.onClick=function(){},yt.prototype.onMouseMove=function(){},yt.prototype.onMouseDown=function(){},yt.prototype.onMouseUp=function(){},yt.prototype.onMouseOut=function(){},yt.prototype.onKeyUp=function(){},yt.prototype.onKeyDown=function(){},yt.prototype.onTouchStart=function(){},yt.prototype.onTouchMove=function(){},yt.prototype.onTouchEnd=function(){},yt.prototype.onTap=function(){},yt.prototype.onStop=function(){},yt.prototype.onTrash=function(){},yt.prototype.onCombineFeature=function(){},yt.prototype.onUncombineFeature=function(){},yt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const bt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},_t=Object.keys(bt);const Et=function(t){return[].concat(t).filter((t=>void 0!==t))};function Ct(){const t=this;if(!t.ctx.map||void 0===t.ctx.map.getSource(x.HOT))return s();const e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});let n=[],o=[];t.isDirty?o=t.getAllIds():(n=t.getChangedIds().filter((e=>void 0!==t.get(e))),o=t.sources.hot.filter((e=>e.properties.id&&-1===n.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id))).map((t=>t.properties.id))),t.sources.hot=[];const r=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((t=>{const e=t.properties.id||t.properties.parent;return-1===n.indexOf(e)}));const i=r!==t.sources.cold.length||o.length>0;function a(n,o){const r=t.get(n).internal(e);t.ctx.events.currentModeRender(r,(e=>{t.sources[o].push(e)}))}if(n.forEach((t=>a(t,"hot"))),o.forEach((t=>a(t,"cold"))),i&&t.ctx.map.getSource(x.COLD).setData({type:S.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(x.HOT).setData({type:S.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(I.SELECTION_CHANGE,{features:t.getSelected().map((t=>t.toGeoJSON())),points:t.getSelectedCoordinates().map((t=>({type:S.FEATURE,properties:{},geometry:{type:S.POINT,coordinates:t.coordinates}})))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){const e=t._deletedFeaturesToEmit.map((t=>t.toGeoJSON()));t._deletedFeaturesToEmit=[],t.ctx.map.fire(I.DELETE,{features:e})}function s(){t.isDirty=!1,t.clearChangedIds()}s(),t.ctx.map.fire(I.RENDER,{})}function xt(t){let e;this._features={},this._featureIds=new z,this._selectedFeatureIds=new z,this._selectedCoordinates=[],this._changedFeatureIds=new z,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=()=>{e||(e=requestAnimationFrame((()=>{e=null,Ct.call(this)})))},this.isDirty=!1}function wt(t,e){const n=t._selectedCoordinates.filter((e=>t._selectedFeatureIds.has(e.feature_id)));t._selectedCoordinates.length===n.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=n}xt.prototype.createRenderBatch=function(){const t=this.render;let e=0;return this.render=function(){e++},()=>{this.render=t,e>0&&this.render()}},xt.prototype.setDirty=function(){return this.isDirty=!0,this},xt.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},xt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},xt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},xt.prototype.getAllIds=function(){return this._featureIds.values()},xt.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},xt.prototype.delete=function(t,e={}){return Et(t).forEach((t=>{this._featureIds.has(t)&&(this._featureIds.delete(t),this._selectedFeatureIds.delete(t),e.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[t])&&this._deletedFeaturesToEmit.push(this._features[t]),delete this._features[t],this.isDirty=!0)})),wt(this,e),this},xt.prototype.get=function(t){return this._features[t]},xt.prototype.getAll=function(){return Object.keys(this._features).map((t=>this._features[t]))},xt.prototype.select=function(t,e={}){return Et(t).forEach((t=>{this._selectedFeatureIds.has(t)||(this._selectedFeatureIds.add(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))})),this},xt.prototype.deselect=function(t,e={}){return Et(t).forEach((t=>{this._selectedFeatureIds.has(t)&&(this._selectedFeatureIds.delete(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))})),wt(this,e),this},xt.prototype.clearSelected=function(t={}){return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},xt.prototype.setSelected=function(t,e={}){return t=Et(t),this.deselect(this._selectedFeatureIds.values().filter((e=>-1===t.indexOf(e))),{silent:e.silent}),this.select(t.filter((t=>!this._selectedFeatureIds.has(t))),{silent:e.silent}),this},xt.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},xt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},xt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},xt.prototype.getSelected=function(){return this._selectedFeatureIds.values().map((t=>this.get(t)))},xt.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map((t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)})))},xt.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},xt.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},xt.prototype.storeMapConfig=function(){A.forEach((t=>{this.ctx.map[t]&&(this._mapInitialConfig[t]=this.ctx.map[t].isEnabled())}))},xt.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach((t=>{this._mapInitialConfig[t]?this.ctx.map[t].enable():this.ctx.map[t].disable()}))},xt.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};var Tt=r(7529),St=r.n(Tt);const Lt=["mode","feature","mouse"];function It(t){let e=null,n=null;const o={onRemove(){return t.map.off("load",o.connect),clearInterval(n),o.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.boxZoomInitial&&t.map.boxZoom.enable(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect(){t.map.off("load",o.connect),clearInterval(n),o.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd(r){{const t=r.fire;r.fire=function(e,n){let o=arguments;return 1===t.length&&1!==arguments.length&&(o=[St()({},{type:e},n)]),t.apply(r,o)}}return t.map=r,t.events=function(t){const e=Object.keys(t.options.modes).reduce(((e,n)=>(e[n]=function(t){const e=Object.keys(t);return function(n,o={}){let r={};const i=e.reduce(((e,n)=>(e[n]=t[n],e)),new vt(n));return{start(){r=i.onSetup(o),_t.forEach((e=>{const n=bt[e];let o=()=>!1;var a;t[n]&&(o=()=>!0),this.on(e,o,(a=n,t=>i[a](r,t)))}))},stop(){i.onStop(r)},trash(){i.onTrash(r)},combineFeatures(){i.onCombineFeatures(r)},uncombineFeatures(){i.onUncombineFeatures(r)},render(t,e){i.toDisplayFeatures(r,t,e)}}}}(t.options.modes[n]),e)),{});let n={},o={};const r={};let i=null,a=null;r.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:w.DRAG}),a.drag(e)):e.originalEvent.stopPropagation()},r.mousedrag=function(t){r.drag(t,(t=>!Q(n,t)))},r.touchdrag=function(t){r.drag(t,(t=>!nt(o,t)))},r.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return r.mousedrag(e);const n=Z(e,t);e.featureTarget=n,a.mousemove(e)},r.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};const o=Z(e,t);e.featureTarget=o,a.mousedown(e)},r.mouseup=function(e){const o=Z(e,t);e.featureTarget=o,Q(n,{point:e.point,time:(new Date).getTime()})?a.click(e):a.mouseup(e)},r.mouseout=function(t){a.mouseout(t)},r.touchstart=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;o={time:(new Date).getTime(),point:e.point};const n=H.touch(e,null,t)[0];e.featureTarget=n,a.touchstart(e)},r.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return a.touchmove(e),r.touchdrag(e)},r.touchend=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;const n=H.touch(e,null,t)[0];e.featureTarget=n,nt(o,{time:(new Date).getTime(),point:e.point})?a.tap(e):a.touchend(e)};const s=t=>!(8===t||46===t||t>=48&&t<=57);function c(n,o,r={}){a.stop();const s=e[n];if(void 0===s)throw new Error(`${n} is not valid`);i=n;const c=s(t,o);a=_(c,t),r.silent||t.map.fire(I.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}r.keydown=function(e){const n=(e.srcElement||e.target).classList;(n.contains("mapboxgl-canvas")||n.contains("maplibregl-canvas"))&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?s(e.keyCode)?a.keydown(e):49===e.keyCode&&t.options.controls.point?c(L.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?c(L.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&c(L.DRAW_POLYGON):(e.preventDefault(),a.trash()))},r.keyup=function(t){s(t.keyCode)&&a.keyup(t)},r.zoomend=function(){t.store.changeZoom()},r.data=function(e){if("style"===e.dataType){const{setup:e,map:n,options:o,store:r}=t;o.styles.some((t=>n.getLayer(t.id)))||(e.addLayers(),r.setDirty(),r.render())}};const l={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){i=t.options.defaultMode,a=_(e[i](t),t)},changeMode:c,actionable:function(e){let n=!1;Object.keys(e).forEach((t=>{if(void 0===l[t])throw new Error("Invalid action type");l[t]!==e[t]&&(n=!0),l[t]=e[t]})),n&&t.map.fire(I.ACTIONABLE,{actions:l})},currentModeName:()=>i,currentModeRender:(t,e)=>a.render(t,e),fire(t,e){r[t]&&r[t](e)},addEventListeners(){t.map.on("mousemove",r.mousemove),t.map.on("mousedown",r.mousedown),t.map.on("mouseup",r.mouseup),t.map.on("data",r.data),t.map.on("touchmove",r.touchmove),t.map.on("touchstart",r.touchstart),t.map.on("touchend",r.touchend),t.container.addEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",r.keydown),t.container.addEventListener("keyup",r.keyup))},removeEventListeners(){t.map.off("mousemove",r.mousemove),t.map.off("mousedown",r.mousedown),t.map.off("mouseup",r.mouseup),t.map.off("data",r.data),t.map.off("touchmove",r.touchmove),t.map.off("touchstart",r.touchstart),t.map.off("touchend",r.touchend),t.container.removeEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",r.keydown),t.container.removeEventListener("keyup",r.keyup))},trash(t){a.trash(t)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode:()=>i}}(t),t.ui=function(t){const e={};let n=null,o={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function i(t){r=St()(r,t)}function a(){if(!t.container)return;const e=[],n=[];Lt.forEach((t=>{r[t]!==o[t]&&(e.push(`${t}-${o[t]}`),null!==r[t]&&n.push(`${t}-${r[t]}`))})),e.length>0&&t.container.classList.remove(...e),n.length>0&&t.container.classList.add(...n),o=St()(o,r)}function s(t,e={}){const o=document.createElement("button");return o.className=`${C.CONTROL_BUTTON} ${e.className}`,o.setAttribute("title",e.title),e.container.appendChild(o),o.addEventListener("click",(o=>{if(o.preventDefault(),o.stopPropagation(),o.target===n)return c(),void e.onDeactivate();l(t),e.onActivate()}),!0),o}function c(){n&&(n.classList.remove(C.ACTIVE_BUTTON),n=null)}function l(t){c();const o=e[t];o&&o&&"trash"!==t&&(o.classList.add(C.ACTIVE_BUTTON),n=o)}return{setActiveButton:l,queueMapClasses:i,updateMapClasses:a,clearMapClasses:function(){i({mode:null,feature:null,mouse:null}),a()},addButtons:function(){const n=t.options.controls,o=document.createElement("div");return o.className=`${C.CONTROL_GROUP} ${C.CONTROL_BASE}`,n?(n[T.LINE]&&(e[T.LINE]=s(T.LINE,{container:o,className:C.CONTROL_BUTTON_LINE,title:"LineString tool "+(t.options.keybindings?"(l)":""),onActivate:()=>t.events.changeMode(L.DRAW_LINE_STRING),onDeactivate:()=>t.events.trash()})),n[T.POLYGON]&&(e[T.POLYGON]=s(T.POLYGON,{container:o,className:C.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(t.options.keybindings?"(p)":""),onActivate:()=>t.events.changeMode(L.DRAW_POLYGON),onDeactivate:()=>t.events.trash()})),n[T.POINT]&&(e[T.POINT]=s(T.POINT,{container:o,className:C.CONTROL_BUTTON_POINT,title:"Marker tool "+(t.options.keybindings?"(m)":""),onActivate:()=>t.events.changeMode(L.DRAW_POINT),onDeactivate:()=>t.events.trash()})),n.trash&&(e.trash=s("trash",{container:o,className:C.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{t.events.trash()}})),n.combine_features&&(e.combine_features=s("combineFeatures",{container:o,className:C.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=s("uncombineFeatures",{container:o,className:C.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{t.events.uncombineFeatures()}})),o):o},removeButtons:function(){Object.keys(e).forEach((t=>{const n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]}))}}}(t),t.container=r.getContainer(),t.store=new xt(t),e=t.ui.addButtons(),t.options.boxSelect&&(t.boxZoomInitial=r.boxZoom.isEnabled(),r.boxZoom.disable(),r.dragPan.disable(),r.dragPan.enable()),r.loaded()?o.connect():(r.on("load",o.connect),n=setInterval((()=>{r.loaded()&&o.connect()}),16)),t.events.start(),e},addLayers(){t.map.addSource(x.COLD,{data:{type:S.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(x.HOT,{data:{type:S.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((e=>{t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers(){t.options.styles.forEach((e=>{t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(x.COLD)&&t.map.removeSource(x.COLD),t.map.getSource(x.HOT)&&t.map.removeSource(x.HOT)}};return t.setup=o,o}const Ot=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Mt(t){return function(e){const n=e.featureTarget;return!!n&&!!n.properties&&n.properties.meta===t}}function Nt(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button}function At(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===N.ACTIVE&&t.featureTarget.properties.meta===M.FEATURE}function Pt(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===N.INACTIVE&&t.featureTarget.properties.meta===M.FEATURE}function Ft(t){return void 0===t.featureTarget}function kt(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===M.FEATURE}function Rt(t){const e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===M.VERTEX}function Dt(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function Ut(t){return 27===t.keyCode}function jt(t){return 13===t.keyCode}function Bt(){return!0}var Vt=r(5550),$t=r.n(Vt);const Gt=function(t,e){const n=e.getBoundingClientRect();return new($t())(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))};function zt(t,e,n,o){return{type:S.FEATURE,properties:{meta:M.VERTEX,parent:t,coord_path:n,active:o?N.ACTIVE:N.INACTIVE},geometry:{type:S.POINT,coordinates:e}}}function Jt(t,e,n){const o=e.geometry.coordinates,r=n.geometry.coordinates;if(o[1]>R||o[1]<F||r[1]>R||r[1]<F)return null;const i={lng:(o[0]+r[0])/2,lat:(o[1]+r[1])/2};return{type:S.FEATURE,properties:{meta:M.MIDPOINT,parent:t,lng:i.lng,lat:i.lat,coord_path:n.properties.coord_path},geometry:{type:S.POINT,coordinates:[i.lng,i.lat]}}}const Ht=function t(e,n={},o=null){const{type:r,coordinates:i}=e.geometry,a=e.properties&&e.properties.id;let s=[];function c(t,e){let o="",r=null;t.forEach(((t,i)=>{const c=null!=e?`${e}.${i}`:String(i),u=zt(a,t,c,l(c));if(n.midpoints&&r){const t=Jt(a,r,u);t&&s.push(t)}r=u;const d=JSON.stringify(t);o!==d&&s.push(u),0===i&&(o=d)}))}function l(t){return!!n.selectedPaths&&-1!==n.selectedPaths.indexOf(t)}return r===S.POINT?s.push(zt(a,i,o,l(o))):r===S.POLYGON?i.forEach(((t,e)=>{c(t,null!==o?`${o}.${e}`:String(e))})):r===S.LINE_STRING?c(i,o):0===r.indexOf(S.MULTI_PREFIX)&&function(){const o=r.replace(S.MULTI_PREFIX,"");i.forEach(((r,i)=>{const a={type:S.FEATURE,properties:e.properties,geometry:{type:o,coordinates:r}};s=s.concat(t(a,n,i))}))}(),s},Yt={enable(t){setTimeout((()=>{t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},disable(t){setTimeout((()=>{t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)}};var Zt=r(9319),qt=r.n(Zt);const{LAT_MIN:Xt,LAT_MAX:Wt,LAT_RENDERED_MIN:Kt,LAT_RENDERED_MAX:Qt,LNG_MIN:te,LNG_MAX:ee}=t;function ne(t,e){let n=Xt,o=Wt,r=Xt,i=Wt,a=ee,s=te;t.forEach((t=>{const e=qt()(t),c=e[1],l=e[3],u=e[0],d=e[2];c>n&&(n=c),l<o&&(o=l),l>r&&(r=l),c<i&&(i=c),u<a&&(a=u),d>s&&(s=d)}));const c=e;return n+c.lat>Qt&&(c.lat=Qt-n),r+c.lat>Wt&&(c.lat=Wt-r),o+c.lat<Kt&&(c.lat=Kt-o),i+c.lat<Xt&&(c.lat=Xt-i),a+c.lng<=te&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),s+c.lng>=ee&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function oe(t,e){const n=ne(t.map((t=>t.toGeoJSON())),e);t.forEach((t=>{const e=t.getCoordinates(),o=t=>{const e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},r=t=>t.map((t=>o(t)));let i;t.type===S.POINT?i=o(e):t.type===S.LINE_STRING||t.type===S.MULTI_POINT?i=e.map(o):t.type===S.POLYGON||t.type===S.MULTI_LINE_STRING?i=e.map(r):t.type===S.MULTI_POLYGON&&(i=e.map((t=>t.map((t=>r(t)))))),t.incomingCoords(i)}))}const re={onSetup:function(t){const e={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(e.initiallySelectedFeatureIds.filter((t=>void 0!==this.getFeature(t)))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),e},fireUpdate:function(){this.map.fire(I.UPDATE,{action:O.MOVE,features:this.getSelected().map((t=>t.toGeoJSON()))})},fireActionable:function(){const t=this.getSelected(),e=t.filter((t=>this.isInstanceOf("MultiFeature",t)));let n=!1;if(t.length>1){n=!0;const e=t[0].type.replace("Multi","");t.forEach((t=>{t.type.replace("Multi","")!==e&&(n=!1)}))}const o=e.length>0,r=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:o,trash:r})},getUniqueIds:function(t){return t.length?t.map((t=>t.properties.id)).filter((t=>void 0!==t)).reduce(((t,e)=>(t.add(e),t)),new z).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){Yt.enable(this)},onMouseMove:function(t,e){return kt(e)&&t.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(t),!0},onMouseOut:function(t){return!t.dragMoving||this.fireUpdate()}};re.onTap=re.onClick=function(t,e){return Ft(e)?this.clickAnywhere(t,e):Mt(M.VERTEX)(e)?this.clickOnVertex(t,e):kt(e)?this.clickOnFeature(t,e):void 0},re.clickAnywhere=function(t){const e=this.getSelectedIds();e.length&&(this.clearSelectedFeatures(),e.forEach((t=>this.doRender(t)))),Yt.enable(this),this.stopExtendedInteractions(t)},re.clickOnVertex=function(t,e){this.changeMode(L.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:w.MOVE})},re.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},re.clickOnFeature=function(t,e){Yt.disable(this),this.stopExtendedInteractions(t);const n=Dt(e),o=this.getSelectedIds(),r=e.featureTarget.properties.id,i=this.isSelected(r);if(!n&&i&&this.getFeature(r).type!==S.POINT)return this.changeMode(L.DIRECT_SELECT,{featureId:r});i&&n?(this.deselect(r),this.updateUIClasses({mouse:w.POINTER}),1===o.length&&Yt.enable(this)):!i&&n?(this.select(r),this.updateUIClasses({mouse:w.MOVE})):i||n||(o.forEach((t=>this.doRender(t))),this.setSelected(r),this.updateUIClasses({mouse:w.MOVE})),this.doRender(r)},re.onMouseDown=function(t,e){return At(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&Nt(e)?this.startBoxSelect(t,e):void 0},re.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=Gt(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},re.onTouchStart=function(t,e){if(At(e))return this.startOnActiveFeature(t,e)},re.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},re.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:w.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(C.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));const n=Gt(e.originalEvent,this.map.getContainer()),o=Math.min(t.boxSelectStartLocation.x,n.x),r=Math.max(t.boxSelectStartLocation.x,n.x),i=Math.min(t.boxSelectStartLocation.y,n.y),a=Math.max(t.boxSelectStartLocation.y,n.y),s=`translate(${o}px, ${i}px)`;t.boxSelectElement.style.transform=s,t.boxSelectElement.style.WebkitTransform=s,t.boxSelectElement.style.width=r-o+"px",t.boxSelectElement.style.height=a-i+"px"},re.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();const n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};oe(this.getSelected(),n),t.dragMoveLocation=e.lngLat},re.onTouchEnd=re.onMouseUp=function(t,e){if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){const n=[t.boxSelectStartLocation,Gt(e.originalEvent,this.map.getContainer())],o=this.featuresAt(null,n,"click"),r=this.getUniqueIds(o).filter((t=>!this.isSelected(t)));r.length&&(this.select(r),r.forEach((t=>this.doRender(t))),this.updateUIClasses({mouse:w.MOVE}))}this.stopExtendedInteractions(t)},re.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?N.ACTIVE:N.INACTIVE,n(e),this.fireActionable(),e.properties.active===N.ACTIVE&&e.geometry.type!==S.POINT&&Ht(e).forEach(n)},re.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},re.onCombineFeatures=function(){const t=this.getSelected();if(0===t.length||t.length<2)return;const e=[],n=[],o=t[0].type.replace("Multi","");for(let r=0;r<t.length;r++){const i=t[r];if(i.type.replace("Multi","")!==o)return;i.type.includes("Multi")?i.getCoordinates().forEach((t=>{e.push(t)})):e.push(i.getCoordinates()),n.push(i.toGeoJSON())}if(n.length>1){const t=this.newFeature({type:S.FEATURE,properties:n[0].properties,geometry:{type:`Multi${o}`,coordinates:e}});this.addFeature(t),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([t.id]),this.map.fire(I.COMBINE_FEATURES,{createdFeatures:[t.toGeoJSON()],deletedFeatures:n})}this.fireActionable()},re.onUncombineFeatures=function(){const t=this.getSelected();if(0===t.length)return;const e=[],n=[];for(let o=0;o<t.length;o++){const r=t[o];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach((t=>{this.addFeature(t),t.properties=r.properties,e.push(t.toGeoJSON()),this.select([t.id])})),this.deleteFeature(r.id,{silent:!0}),n.push(r.toGeoJSON()))}e.length>1&&this.map.fire(I.UNCOMBINE_FEATURES,{createdFeatures:e,deletedFeatures:n}),this.fireActionable()};const ie=re,ae=Mt(M.VERTEX),se=Mt(M.MIDPOINT),ce={fireUpdate:function(){this.map.fire(I.UPDATE,{action:O.CHANGE_COORDINATES,features:this.getSelected().map((t=>t.toGeoJSON()))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);const n=e.featureTarget.properties,o=t.selectedCoordPaths.indexOf(n.coord_path);Dt(e)||-1!==o?Dt(e)&&-1===o&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];const r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);const n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map((e=>({feature_id:t,coord_path:e})))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){oe(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){const o=t.selectedCoordPaths.map((e=>t.feature.getCoordinate(e))),r=ne(o.map((t=>({type:S.FEATURE,properties:{},geometry:{type:S.POINT,coordinates:t}}))),n);for(let e=0;e<o.length;e++){const n=o[e];t.feature.updateCoordinate(t.selectedCoordPaths[e],n[0]+r.lng,n[1]+r.lat)}},clickNoTarget:function(){this.changeMode(L.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(L.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){const e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===S.POINT)throw new TypeError("direct_select mode doesn't handle point features");const o={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,o.selectedCoordPaths)),this.setSelected(e),Yt.disable(this),this.setActionableState({trash:!0}),o},onStop:function(){Yt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=N.ACTIVE,n(e),Ht(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=N.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort(((t,e)=>e.localeCompare(t,"en",{numeric:!0}))).forEach((e=>t.feature.removeCoordinate(e))),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(L.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){const n=At(e),o=ae(e),r=se(e),i=0===t.selectedCoordPaths.length;return n&&i||o&&!i?this.updateUIClasses({mouse:w.MOVE}):this.updateUIClasses({mouse:w.NONE}),(o||n||r)&&t.dragMoving&&this.fireUpdate(),this.stopDragging(t),!0},onMouseOut:function(t){return t.dragMoving&&this.fireUpdate(),!0}};ce.onTouchStart=ce.onMouseDown=function(t,e){return ae(e)?this.onVertex(t,e):At(e)?this.onFeature(t,e):se(e)?this.onMidpoint(t,e):void 0},ce.onDrag=function(t,e){if(!0!==t.canDragMove)return;t.dragMoving=!0,e.originalEvent.stopPropagation();const n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat},ce.onClick=function(t,e){return Ft(e)?this.clickNoTarget(t,e):At(e)?this.clickActiveFeature(t,e):Pt(e)?this.clickInactive(t,e):void this.stopDragging(t)},ce.onTap=function(t,e){return Ft(e)?this.clickNoTarget(t,e):At(e)?this.clickActiveFeature(t,e):Pt(e)?this.clickInactive(t,e):void 0},ce.onTouchEnd=ce.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};const le=ce,ue={onSetup:function(){const t=this.newFeature({type:S.FEATURE,properties:{},geometry:{type:S.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:w.ADD}),this.activateUIButton(T.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT)}};ue.onTap=ue.onClick=function(t,e){this.updateUIClasses({mouse:w.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(I.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.point.id]})},ue.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},ue.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.point.id;if(e.properties.active=o?N.ACTIVE:N.INACTIVE,!o)return n(e)},ue.onTrash=ue.stopDrawingAndRemove,ue.onKeyUp=function(t,e){if(Ut(e)||jt(e))return this.stopDrawingAndRemove(t,e)};const de=ue,pe=function(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]},he={onSetup:function(){const t=this.newFeature({type:S.FEATURE,properties:{},geometry:{type:S.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),Yt.disable(this),this.updateUIClasses({mouse:w.ADD}),this.activateUIButton(T.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&pe(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:w.ADD}),t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),Rt(e)&&this.updateUIClasses({mouse:w.POINTER})}};he.onTap=he.onClick=function(t,e){return Rt(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},he.onKeyUp=function(t,e){Ut(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT)):jt(e)&&this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},he.onStop=function(t){this.updateUIClasses({mouse:w.NONE}),Yt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate(`0.${t.currentVertexPosition}`),t.polygon.isValid()?this.map.fire(I.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT,{},{silent:!0})))},he.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.polygon.id;if(e.properties.active=o?N.ACTIVE:N.INACTIVE,!o)return n(e);if(0===e.geometry.coordinates.length)return;const r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=M.FEATURE,n(zt(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){const o=e.geometry.coordinates[0].length-3;n(zt(t.polygon.id,e.geometry.coordinates[0][o],`0.${o}`,!1))}if(r<=4){const t=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:S.FEATURE,properties:e.properties,geometry:{coordinates:t,type:S.LINE_STRING}}),3===r)return}return n(e)}},he.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT)};const fe=he,ge={onSetup:function(t){const e=(t=t||{}).featureId;let n,o,r="forward";if(e){if(n=this.getFeature(e),!n)throw new Error("Could not find a feature with the provided featureId");let i=t.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const a=n.coordinates.length-1;if(n.coordinates[a][0]===i[0]&&n.coordinates[a][1]===i[1])o=a+1,n.addCoordinate(o,...n.coordinates[a]);else{if(n.coordinates[0][0]!==i[0]||n.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",o=0,n.addCoordinate(o,...n.coordinates[0])}}else n=this.newFeature({type:S.FEATURE,properties:{},geometry:{type:S.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(n);return this.clearSelectedFeatures(),Yt.disable(this),this.updateUIClasses({mouse:w.ADD}),this.activateUIButton(T.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:o,direction:r}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&pe(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&pe(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:w.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Rt(e)&&this.updateUIClasses({mouse:w.POINTER})}};ge.onTap=ge.onClick=function(t,e){if(Rt(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},ge.onKeyUp=function(t,e){jt(e)?this.changeMode(L.SIMPLE_SELECT,{featureIds:[t.line.id]}):Ut(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT))},ge.onStop=function(t){Yt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(`${t.currentVertexPosition}`),t.line.isValid()?this.map.fire(I.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT,{},{silent:!0})))},ge.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(L.SIMPLE_SELECT)},ge.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.line.id;if(e.properties.active=o?N.ACTIVE:N.INACTIVE,!o)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=M.FEATURE,n(zt(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))};const me={simple_select:ie,direct_select:le,draw_point:de,draw_polygon:fe,draw_line_string:ge},ye={defaultMode:L.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Ot,modes:me,controls:{},userProperties:!1},ve={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},be={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function _e(t,e){return t.map((t=>t.source?t:St()(t,{id:`${t.id}.${e}`,source:"hot"===e?x.HOT:x.COLD})))}var Ee=r(2307),Ce=r.n(Ee),xe=r(9340),we=r.n(xe);function Te(t,e){return t.length===e.length&&JSON.stringify(t.map((t=>t)).sort())===JSON.stringify(e.map((t=>t)).sort())}const Se={Polygon:pt,LineString:ut,Point:ct,MultiPolygon:mt,MultiLineString:mt,MultiPoint:mt};function Le(t){!function(t,e){const n={options:t=function(t={}){let e=St()(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=St()(be,t.controls):e.controls=St()(ve,t.controls),e=St()(ye,e),e.styles=_e(e.styles,"cold").concat(_e(e.styles,"hot")),e}(t)};e=function(t,e){return e.modes=L,e.getFeatureIdsAt=function(e){return H.click({point:e},null,t).map((t=>t.properties.id))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:S.FEATURE_COLLECTION,features:t.store.getSelectedIds().map((e=>t.store.get(e))).map((t=>t.toGeoJSON()))}},e.getSelectedPoints=function(){return{type:S.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map((t=>({type:S.FEATURE,properties:{},geometry:{type:S.POINT,coordinates:t.coordinates}})))}},e.set=function(n){if(void 0===n.type||n.type!==S.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");const o=t.store.createRenderBatch();let r=t.store.getAllIds().slice();const i=e.add(n),a=new z(i);return r=r.filter((t=>!a.has(t))),r.length&&e.delete(r),o(),i},e.add=function(e){const n=JSON.parse(JSON.stringify(we()(e))).features.map((e=>{if(e.id=e.id||rt()(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){const n=Se[e.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${e.geometry.type}.`);const o=new n(t,e);t.store.add(o)}else{const n=t.store.get(e.id);n.properties=e.properties,Ce()(n.getCoordinates(),e.geometry.coordinates)||n.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),n},e.get=function(e){const n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:S.FEATURE_COLLECTION,features:t.store.getAll().map((t=>t.toGeoJSON()))}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==L.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(L.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===L.DIRECT_SELECT?t.events.changeMode(L.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n,o={}){return n===L.SIMPLE_SELECT&&e.getMode()===L.SIMPLE_SELECT?(Te(o.featureIds||[],t.store.getSelectedIds())||(t.store.setSelected(o.featureIds,{silent:!0}),t.store.render()),e):(n===L.DIRECT_SELECT&&e.getMode()===L.DIRECT_SELECT&&o.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(n,o,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,o,r){return t.store.setFeatureProperty(n,o,r),e},e}(n,e),n.api=e;const o=It(n);e.onAdd=o.onAdd,e.onRemove=o.onRemove,e.types=T,e.options=t}(t,this)}Le.modes=me,Le.constants=t,Le.lib=n;const Ie=Le,Oe=new geolonia.Map({container:"#map",style:(()=>{const t="https://raw.githubusercontent.com/%s/gh-pages/style.json";let e;const n=new URLSearchParams(location.search).get("style");if(n)if(n.match(/^https:\/\//))e=n;else{const o=n.split(/\//);e=t.replace("%s",o.join("/"))}else e=t.replace("%s","geoloniamaps/basic");return e})()}),Me=new Ie({controls:{point:!1,polygon:!1,combine_features:!1,uncombine_features:!1},styles:[{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e74230","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e74230","line-dasharray":[.2,2],"line-width":2}}]}),Ne=new(b())({dpi:300,attribution:"Â© Geolonia | Â© OpenStreetMap"});let Ae=!0;const Pe=new class{constructor(t){this.options=t}onAdd(){this.container=document.createElement("div"),this.container.className="maplibregl-ctrl maplibregl-ctrl-group";const t=document.createElement("button");return t.className="maplibregl-ctrl-icon mapbox-gl-switch-style",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.type="button",t.setAttribute("aria-label","switch style"),t.innerHTML="EL.",this.container.appendChild(t),t.addEventListener("click",this.options.onClick),t.addEventListener("touchstart",(t=>{t.preventDefault(),this.options.onClick(t)})),this.container}onRemove(){this.container.parentNode.removeChild(this.container)}}({onClick:()=>{Ae=!Ae;const t=o(Ae);Oe.removeLayer(t.id),Oe.removeLayer("app-end-circle"),Oe.addLayer(t),Oe.addLayer(i)}}),Fe=new class{constructor(t){this.options=t}onAdd(){this.container=document.createElement("div"),this.container.className="maplibregl-ctrl maplibregl-ctrl-group";const t=document.createElement("button");t.className="maplibregl-ctrl-icon mapbox-gl-copy-to-clipboard",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.type="button",t.setAttribute("aria-label","copy url to clipboard"),t.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="20px" height="20px" viewBox="0 0 84 84" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group-2" transform="translate(-9.000000, -8.000000)" fill="#000000" fill-rule="nonzero">\n            <g id="Group" transform="translate(51.073130, 50.399487) scale(-1, 1) rotate(45.000000) translate(-51.073130, -50.399487) translate(0.073130, 30.399487)">\n                <path d="M41.1538462,0 C51.9871239,0 60.7692308,8.80468294 60.7692308,19.6658098 C60.7692308,30.4183253 52.1618879,39.1553202 41.4782224,39.3289849 L41.1538462,39.3316195 L19.6153846,39.3316195 C8.78210683,39.3316195 0,30.5269366 0,19.6658098 C0,17.5361771 1.72198173,15.8097686 3.84615385,15.8097686 C5.94343771,15.8097686 7.64864877,17.4927471 7.69148263,19.5851342 L7.69230769,19.6658098 C7.69230769,26.2016526 12.924222,31.512375 19.4182147,31.6179358 L19.6153846,31.6195373 L41.1538462,31.6195373 C47.7387797,31.6195373 53.0769231,26.2676712 53.0769231,19.6658098 C53.0769231,13.129967 47.8450088,7.81924458 41.351016,7.71368372 L41.1538462,7.71208226 L19.6153846,7.71208226 C17.4912125,7.71208226 15.7692308,5.98567384 15.7692308,3.85604113 C15.7692308,1.7533658 17.4478939,0.0437711512 19.5349159,0.000827187325 L19.6153846,0 L41.1538462,0 Z" id="Rectangle" transform="translate(30.384615, 19.665810) scale(-1, -1) translate(-30.384615, -19.665810) "></path>\n                <path d="M81.9230769,0 C92.7563547,0 101.538462,8.80468294 101.538462,19.6658098 C101.538462,30.4183253 92.9311186,39.1553202 82.2474532,39.3289849 L81.9230769,39.3316195 L60.3846154,39.3316195 C49.5513376,39.3316195 40.7692308,30.5269366 40.7692308,19.6658098 C40.7692308,17.5361771 42.4912125,15.8097686 44.6153846,15.8097686 C46.7126685,15.8097686 48.4178795,17.4927471 48.4607134,19.5851342 L48.4615385,19.6658098 C48.4615385,26.2016526 53.6934528,31.512375 60.1874455,31.6179358 L60.3846154,31.6195373 L81.9230769,31.6195373 C88.5080105,31.6195373 93.8461538,26.2676712 93.8461538,19.6658098 C93.8461538,13.129967 88.6142395,7.81924458 82.1202468,7.71368372 L81.9230769,7.71208226 L60.3846154,7.71208226 C58.2604433,7.71208226 56.5384615,5.98567384 56.5384615,3.85604113 C56.5384615,1.7533658 58.2171247,0.0437711512 60.3041466,0.000827187325 L60.3846154,0 L81.9230769,0 Z" id="Rectangle"></path>\n            </g>\n        </g>\n    </g>\n</svg>',this.container.appendChild(t);const e=()=>{s.select(),s.setSelectionRange(0,99999),document.execCommand("copy"),s.setSelectionRange(0,0),s.blur(),"function"==typeof this.options.callback&&this.options.callback()};return t.addEventListener("click",e),t.addEventListener("touchstart",(t=>{t.preventDefault(),e()})),this.container}onRemove(){this.container.parentNode.removeChild(this.container)}}({callback:()=>{y("copy",!1,0),y("copied",!0,0),y("copied",!1,3e3)}}),ke=new class{constructor(){this._input=null,this._map=null,this._search=()=>{this._input&&this._map&&this._input.value&&window.getLatLng(this._input.value,(t=>{this._map.flyTo({center:t})}),(t=>{alert(t.messge||"è¦ã¤ããã¾ããã§ããããã£ã¨è©³ç´°ãªä½æãå¥åãã¦ã¿ã¦ãã ããã")}))}}onAdd(t){return this._map=t,this._container=document.createElement("div"),this._container.style.display="flex",this._container.className="maplibregl-ctrl maplibregl-ctrl-group",this._input=document.createElement("input"),this._input.placeholder="ä¾: æ±äº¬é½åä»£ç°åºéãé¢1-3-1",this._button=document.createElement("button"),this._button.innerText="æ¤ç´¢",this._button.style.width="50px",this._button.addEventListener("click",(()=>this._search())),this._container.appendChild(this._input),this._container.appendChild(this._button),this._container}onRemove(){this._container.parentNode.removeChild(this._container)}};Oe.addControl(Me,"top-right"),Oe.addControl(Pe),Oe.addControl(Ne),Oe.addControl(Fe),Oe.addControl(ke,"bottom-left"),Oe.on("load",(async()=>{const t=(()=>{let t;s.value=window.location.href;const e=a.get("g");if(e){try{t=e.split(";").map((t=>t.split(",").map((t=>parseFloat(t)))))}catch(t){console.error(t)}if(t){const e={type:"LineString",coordinates:t};try{return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}}catch(t){return console.error(t),null}}}})(),e=document.querySelector("button.mapbox-gl-download");e.addEventListener("click",(()=>y("download",!1))),e.addEventListener("touchstart",(()=>{y("switch",!1),y("download",!1)}));const n=t=>{const e=o(Ae);t?(Oe.getSource("app-vertice")&&(Oe.removeLayer(e.id),Oe.removeLayer("app-end-circle"),Oe.removeSource("app-vertice")),Oe.addSource("app-vertice",{type:"geojson",data:t}),Oe.addLayer(e),Oe.addLayer(i)):(Oe.removeLayer(e.id),Oe.removeLayer("app-end-circle"),Oe.removeSource("app-vertice"))};if(t){Me.set(t);const e=t.features[0],{vertice:o}=await l(e.geometry);n(o)}if(y("trail",!0,1e3),Oe.on("draw.create",(async t=>{const e=t.features[0];Me.deleteAll(),Me.set({type:"FeatureCollection",features:[e]}),y("trail",!1),y("copied",!1),y("switch",!0,1e3),y("download",!0,1e3),y("copy",!0,1e3),y("switch",!1,11e3),y("download",!1,11e3),y("copy",!1,11e3);const{vertice:o}=await l(e.geometry);c(e),n(o)})),Oe.on("draw.update",(async t=>{if("move"===t.action||"change_coordinates"===t.action){y("trail",!1);const t=Me.getAll().features[0],{vertice:e}=await l(t.geometry);c(t),n(e)}})),Oe.on("draw.delete",(()=>{n(!1),y("copied",!1),y("copy",!1),y("switch",!1),y("download",!1),y("trail",!0,1e3)})),Oe.on("click",(async()=>{if("draw_line_string"===Me.getMode()){const{features:t}=Me.getAll(),e=t[t.length-1];if(e.geometry.coordinates.length<3)return;{const t=e.geometry.coordinates.slice(0,e.geometry.coordinates.length-1),o={...e.geometry,coordinates:t},{vertice:r}=await l(o);n(r)}}})),"ontouchstart"in window){const t=document.getElementById("done");t.addEventListener("touchstart",(()=>{t.style.display="none",Me.changeMode("simple_select")})),Oe.on("draw.modechange",(e=>{"draw_line_string"===e.mode?t.style.display="block":t.style.display="none"}))}}))})()})();