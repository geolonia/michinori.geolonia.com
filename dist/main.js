!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=new URLSearchParams(window.location.search),r=e=>{o.set("g",e.geometry.coordinates.map(e=>e.join(",")).join(";")),window.history.replaceState({},"",`?${o.toString()}${window.location.hash}`),document.getElementById("url").value=window.location.href};document.getElementById("clip").addEventListener("click",()=>{var e=document.getElementById("url");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.setSelectionRange(0,0),c("copy",!1,0),c("copied",!0,0),c("copied",!1,5e3)});const i=document.getElementById("wizard-trail"),l=document.getElementById("wizard-copy"),a=document.getElementById("wizard-copied"),c=(e,t,n=0)=>{const o=t?"block":"none";let r=null;switch(e){case"trail":r=i;break;case"copy":r=l;break;case"copied":r=a}r&&setTimeout(()=>r.style.display=o,n)},u=new geolonia.Map({container:document.getElementById("map"),hash:!0}),d=new MapboxDraw({controls:{point:!1,polygon:!1,combine_features:!1,uncombine_features:!1},styles:[{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgb(255, 0, 0)","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}}]});u.addControl(d,"top-right"),u.on("load",()=>{const e=(()=>{let e;document.getElementById("url").value=window.location.href;const t=o.get("g");if(t){try{e=t.split(";").map(e=>e.split(",").map(e=>parseFloat(e)))}catch(e){console.error(e)}if(e){const t={type:"LineString",coordinates:e};try{return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}}catch(e){return console.error(e),null}}}})();e&&d.set(e),c("trail",!0,1e3),u.on("draw.create",e=>{const t=e.features[0];d.deleteAll(),d.set({type:"FeatureCollection",features:[t]}),c("trail",!1),c("copy",!0,1e3),r(t)}),u.on("draw.update",e=>{if("move"===e.action||"change_coordinates"===e.action){const e=d.getAll().features[0];c("trail",!1),r(e)}})})}]);