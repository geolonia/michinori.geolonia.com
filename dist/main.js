!function(e){function t(t){for(var n,r,a=t[0],i=t[1],c=0,s=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&s.push(o[r][0]),o[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(l&&l(t);s.length;)s.shift()()}var n={},o={0:0};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(e){return r.p+""+({}[e]||e)+".js"}(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=i;r(r.s=0)}([function(e,t,n){"use strict";n.r(t);const o=new URLSearchParams(window.location.search),r=e=>{o.set("g",e.geometry.coordinates.map(e=>e.join(",")).join(";")),window.history.replaceState({},"",`?${o.toString()}${window.location.hash}`),document.getElementById("url").value=window.location.href},a=async e=>{const t=await n.e(1).then(n.t.bind(null,1,7)),{coordinates:o}=e;let r=0;for(let e=1;e<o.length;e++){const n=t.point(o[e-1]),a=t.point(o[e]);r+=t.distance(n,a)}return r};document.getElementById("clip").addEventListener("click",()=>{var e=document.getElementById("url");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.setSelectionRange(0,0),u("copy",!1,0),u("copied",!0,0),u("copied",!1,3e3)});const i=document.getElementById("wizard-trail"),c=document.getElementById("wizard-copy"),l=document.getElementById("wizard-copied"),s=document.getElementById("distance"),u=(e,t,n=0)=>{const o=t?"block":"none";let r=null;switch(e){case"trail":r=i;break;case"copy":r=c;break;case"copied":r=l}r&&setTimeout(()=>r.style.display=o,n)},d=e=>{let t="";t=e<1?Math.round(1e3*e)+" m":Math.round(100*e)/100+" km",s.innerText=t},p=new geolonia.Map("#map"),y=new MapboxDraw({controls:{point:!1,polygon:!1,combine_features:!1,uncombine_features:!1},styles:[{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgb(255, 0, 0)","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}}]});p.addControl(y,"top-right"),p.on("load",async()=>{const e=(()=>{let e;document.getElementById("url").value=window.location.href;const t=o.get("g");if(t){try{e=t.split(";").map(e=>e.split(",").map(e=>parseFloat(e)))}catch(e){console.error(e)}if(e){const t={type:"LineString",coordinates:e};try{return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}}catch(e){return console.error(e),null}}}})();let t,n;const i=e=>{t&&t.remove(),n&&n.remove(),t=new geolonia.Marker,n=new geolonia.Marker;const o=e.geometry.coordinates.length-1;t.setLngLat(e.geometry.coordinates[0]).addTo(p),n.setLngLat(e.geometry.coordinates[o]).addTo(p)};if(e){const t=e.features[0],n=await a(t.geometry);d(n),y.set(e),i(t)}u("trail",!0,1e3),p.on("draw.create",async e=>{const t=e.features[0];y.deleteAll(),y.set({type:"FeatureCollection",features:[t]}),u("trail",!1),u("copied",!1),u("copy",!0,1e3),r(t);const n=await a(t.geometry);d(n),i(t)}),p.on("draw.update",async e=>{if("move"===e.action||"change_coordinates"===e.action){const e=y.getAll().features[0];u("trail",!1),r(e);const t=await a(e.geometry);d(t),i(e)}})})}]);